let originalSource,isOK=!1;function ok(){isOK=!0}let currentTarget,SourceContainer=document.querySelector("#SourceContainer"),isFirstTranslate=!0;function filterText(e){if("string"==typeof e)e=[e.trim()];else{if(!Array.isArray(e))return!1;e=e.map(e=>e.trim())}return e}function hasCachedText(e,t){let r=[];for(let o=0;o<e.length;o++){let n=`trans[${t}]:`+e[o],a=localStorage.getItem(n);if("string"!=typeof a||""===a)return!1;r.push(a)}return r}function removeControlCharacter(e){return e.replace(/[\u0000-\u001F\u007F-\u009F]/g,"")}function setSource(e){hasTranslated()&&(document.body.innerHTML='<div id="SourceContainer"></div>\n  <div id="google_translate_element"></div>',SourceContainer=document.querySelector("#SourceContainer")),e.forEach(e=>{let t=document.createElement("span");t.innerText=removeControlCharacter(e),SourceContainer.appendChild(t)}),originalSource=e}function setGoogleTransCookie(e){currentTarget!==e&&(document.cookie="googtrans=/auto/"+e,currentTarget=e)}async function googleTranslateElementInit(){for(;!1===isOK;)await sleep(1e3);return new google.translate.TranslateElement({autodisplay:!1,layout:google.translate.TranslateElement.FloatPosition.TOP_LEFT},"google_translate_element"),new Promise(e=>{let t=SourceContainer.children,r=!1;for(let e=0;e<t.length;e++){t[e].setAttribute("data-index",e)}let o=async function(){let t=document.querySelector("span[data-index]");if(t)window.scroll({top:t.offsetTop}),t.removeAttribute("data-index"),setTimeout(()=>{o()},500);else{if(!0===r)return!1;r=!0;let t=await callbackToOpener();saveToLocalStorage(t),e(t)}};o()})}function saveToLocalStorage(e){for(let t=0;t<e.length;t++){let r=`trans[${currentTarget}]:`+originalSource[t],o=e[t];try{localStorage.setItem(r,o)}catch(t){return console.error(t),removeOldestItem(),saveToLocalStorage(e)}}}function removeOldestItem(){for(let e=0;e<100;e++){if(!localStorage.key(0))return!0;localStorage.removeItem(localStorage.key(0))}return!0}function localStorageUsageSpace(){var e="";for(var t in window.localStorage)window.localStorage.hasOwnProperty(t)&&(e+=window.localStorage[t]);return(16*e.length/8192).toFixed(2)}function sleep(e=500){return new Promise(t=>setTimeout(t,e))}function hasTranslated(){return!1===isFirstTranslate||document.querySelectorAll(".goog-te-combo").length>0}async function callbackToOpener(){for(;!1===hasTranslated();)await sleep(100);let e=SourceContainer.firstChild,t=e.innerText.trim();for(;t===originalSource[0];)await sleep(100),t=(e=SourceContainer.firstChild).innerText.trim();let r=[];return document.querySelectorAll("#SourceContainer span").forEach(e=>{let t=e.innerText.trim();t.startsWith('"')&&t.endsWith('"')&&(t=t.slice(1,-1)),r.push(t)}),isFirstTranslate=!1,r}