let isOK=!1;function ok(){isOK=!0}let originalSource,SourceContainer=document.querySelector("#SourceContainer"),isFirstTranslate=!0,pageSourceLang="zh-TW";function filterText(e){if("string"==typeof e)e=[e.trim()];else{if(!Array.isArray(e))return!1;e=e.map(e=>e.trim())}return e}function hasCachedText(e,t){let r=[];for(let n=0;n<e.length;n++){let o=`trans[${t}]:`+e[n],a=localStorage.getItem(o);if("string"!=typeof a||""===a)return!1;r.push(a)}return r}function removeControlCharacter(e){return e.replace(/[\u0000-\u001F\u007F-\u009F]/g,"")}var traditionalChinesePattern=/[\u4E00-\u9FFF]/;function setSource(e){hasTranslated()&&(document.body.innerHTML=`<div id="SourceContainer"></div>
  <div id="google_translate_element"></div>`,SourceContainer=document.querySelector("#SourceContainer")),e.forEach(e=>{let t=document.createElement("div");t.innerText=removeControlCharacter(e),SourceContainer.appendChild(t)}),originalSource=e}let currentTarget;async function setGoogleTransCookie(e){if(currentTarget!==e){for(document.cookie="googtrans=/auto/"+e,currentTarget=e;!document.querySelector(".goog-te-combo");)await sleep(100);setTimeout(async()=>{let t=document.querySelector(".goog-te-combo");t&&t.value!==e&&(t.value=e,t.dispatchEvent(new Event("change")))},100)}}async function googleTranslateElementInit(){for(;!1===isOK;)await sleep(1e3);return new google.translate.TranslateElement({pageLanguage:"zh-TW",autodisplay:!0,layout:google.translate.TranslateElement.FloatPosition.TOP_LEFT},"google_translate_element"),new Promise(e=>{let t=SourceContainer.children,r=!1;for(let n=0;n<t.length;n++)t[n].setAttribute("data-index",n);let o=async function(){let t=document.querySelector("div[data-index]");if(t)window.scroll({top:t.offsetTop}),t.removeAttribute("data-index"),setTimeout(()=>{o()},500);else{if(!0===r)return!1;r=!0;let n=await callbackToOpener();saveToLocalStorage(n),e(n)}};o()})}function saveToLocalStorage(e){for(let t=0;t<e.length;t++){let r=`trans[${currentTarget}]:`+originalSource[t],n=e[t];try{localStorage.setItem(r,n)}catch(o){return console.error(o),removeOldestItem(),saveToLocalStorage(e)}}}function removeOldestItem(){for(let e=0;e<100&&localStorage.key(0);e++){localStorage.removeItem(localStorage.key(0))}return!0}function localStorageUsageSpace(){var e="";for(var t in window.localStorage)window.localStorage.hasOwnProperty(t)&&(e+=window.localStorage[t]);return(16*e.length/8192).toFixed(2)}function sleep(e=500){return new Promise(t=>setTimeout(t,e))}function hasTranslated(){return!1===isFirstTranslate||document.querySelectorAll(".goog-te-combo").length>0}async function callbackToOpener(){for(;!1===hasTranslated();)await sleep(100);let e=SourceContainer.firstChild,t=e.innerText.trim();for(;t===originalSource[0];)await sleep(100),t=(e=SourceContainer.firstChild).innerText.trim();let r=[];return document.querySelectorAll("#SourceContainer div").forEach(e=>{let t=e.innerText.trim();t.startsWith('"')&&t.endsWith('"')&&(t=t.slice(1,-1)),r.push(t)}),isFirstTranslate=!1,r}